/*
Generated time: June 26, 2023 06:08
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
class ProductForm extends HTMLElement{constructor(){super(),this.form=this.querySelector("form"),this.form.addEventListener("submit",this.onSubmitHandler.bind(this)),this.cartNotification=document.querySelector("cart-notification")}getSectionsToRender(){return[{id:"es-header-cart",section:document.getElementById("es-header-cart").dataset.id,selector:"#cart-count-bubble-number"},{id:"mobile-header",section:document.getElementById("mobile-header").dataset.id,selector:"#cart-count-bubble-number"}]}onSubmitHandler(e){e.preventDefault(),this.cartNotification.setActiveElement(document.activeElement);const t=this.querySelector('[type="submit"]'),n=(t.setAttribute("disabled",!0),t.classList.add("loading"),JSON.parse(serializeForm(this.form)));e=JSON.stringify({...n,sections:this.cartNotification.getSectionsToRender().map(e=>e.id),sections_url:window.location.pathname});fetch(""+routes.cart_add_url,{...fetchConfig("javascript"),body:e}).then(e=>e.json()).then(e=>{this.cartNotification.renderContents(e),this.getSectionsToRender().forEach(e=>{var t=document.getElementById(e.id).querySelector(e.selector);t?t.innerHTML=parseInt(t.innerHTML)+parseInt(n.quantity):(t=document.getElementById(e.id).querySelector("#cart-icon-bubble"),"ajax-bar"===e.id?t.innerHTML+=`<div id="cart-count-bubble">(<span id="cart-count-bubble-number" aria-hidden="true">${parseInt(n.quantity)}</span>)<span class="visually-hidden">${parseInt(n.quantity)} Items</span>
              </div>`:t.innerHTML+=`<div id="cart-count-bubble" class="cart-mobile-bubble"><span id="cart-count-bubble-number" aria-hidden="true">${parseInt(n.quantity)}</span><span class="visually-hidden">${parseInt(n.quantity)} Items</span>
              </div>`)})}).catch(e=>{console.error(e)}).finally(()=>{t.classList.remove("loading"),t.removeAttribute("disabled")})}}customElements.define("product-form",ProductForm);